<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Travelking">
        <meta name="author" content="Viktor Kuznietsov">
        <title>Accessible Webpage</title>
        <link rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
        <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
        <style>
            @import url(https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap);body{font-size:14px;line-height:1em;font-family:"Open Sans",sans-serif;font-optical-sizing:auto;font-style:normal;margin:0}h1{font-size:2rem;margin-top:0;line-height:1em}h2{font-size:1.7rem;margin-top:0;line-height:1em}p{font-size:1rem}a{text-decoration:none}.skip-link{display:none}.container{max-width:992px;padding:0 20px;margin:0 auto;width:100%;box-sizing:border-box}.display-flex{display:flex;justify-content:space-between;flex-wrap:wrap;align-items:center}#header{background-color:#4c8ffb;padding:20px 10px;position:sticky}.logo--link{font-size:2rem;letter-spacing:2px;color:#fff}main{box-sizing:border-box;display:flex;justify-content:center;min-height:calc(100vh - 174px);padding-bottom:40px}#footer{text-align:center;padding:50px 20px;background-color:#000;color:#fff;text-align:center}#footer p{margin:0}.room-card{padding:20px;background-color:#fff;border-radius:8px;-webkit-border-radius:8px;box-shadow:0 0 15px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 15px 0 rgba(0,0,0,.1);gap:15px;animation:fade-in .5s ease-in-out;margin-bottom:20px;display:flex}@media (max-width:768px){.room-card{flex-wrap:wrap}}.room-card .room-card--left{width:30%;border-radius:8px;flex-shrink:0;min-height:200px}@media (max-width:768px){.room-card .room-card--left{width:100%}}.room-card .room-card--left img{width:100%;border-radius:8px}.room-card .room-card--right{display:flex;gap:20px;flex:1;padding:20px 0}@media (max-width:600px){.room-card .room-card--right{width:100%;flex-direction:column}}.room-card .room-card--body{display:flex;flex-direction:column;gap:10px;width:70%}@media (max-width:768px){.room-card .room-card--body{width:100%}}.room-card .room-card--body--price{display:flex;flex-direction:column;gap:10px;text-align:right;width:30%}@media (max-width:600px){.room-card .room-card--body--price{width:100%}}.room-card .room-card--body--price--number{width:100%;font-size:1.8rem;font-weight:600}.room-card .room-card--body--price--nights{color:#acacac}.room-card--body--amenities{display:flex;flex-wrap:wrap}.room-card--body--amenities div{padding:5px;border-radius:5px;color:#7c7b7b;background-color:#f2f2f2;margin:0 5px 5px 0}.error-message{padding:20px 30px;background:#d4f5fa;color:#1c38a8;border-radius:10px;-webkit-border-radius:10px}.suspense-block .room-card--left{background:linear-gradient(90deg,#e0e0e0 25%,#f4f4f4 50%,#e0e0e0 75%);animation:loading 1.5s infinite}.suspense-block .room-card--header{height:30px;width:70%;border-radius:4px}.suspense-block .room-card--header{background:linear-gradient(90deg,#e0e0e0 25%,#f4f4f4 50%,#e0e0e0 75%);animation:loading 1.5s infinite}.suspense-block .room-card--body--price{align-items:flex-end}.suspense-block .room-card--body--price--number.suspense-line{width:50%}.suspense-block .room-card--body--amenities{min-height:50px}.suspense-block .suspense-line{height:15px;width:100%;background:linear-gradient(90deg,#e0e0e0 25%,#f4f4f4 50%,#e0e0e0 75%);border-radius:4px;animation:loading 1.5s infinite}@keyframes loading{0%{background-position:-200px 0}100%{background-position:200px 0}}@keyframes fade-in{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}#check-availabilities{box-sizing:border-box;margin:50px auto;padding:40px 30px;border-radius:10px;-webkit-border-radius:10px;box-shadow:0 0 15px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 0 15px 0 rgba(0,0,0,.1)}.check-availabilities--btn--wrapper{display:flex;justify-content:center}.btn{font-size:1.3rem;cursor:pointer;color:#fff;background-color:#000;border:none;padding:0 40px;margin:20px auto 0;height:60px;line-height:50px;text-align:center;border-radius:30px;-webkit-border-radius:30px;-webkit-transition:background .3s ease-in;-moz-transition:background .3s ease-in;-ms-transition:background .3s ease-in;-o-transition:background .3s ease-in;transition:background .3s ease-in}.btn:hover{background-color:#4c8ffb}#calendar-wrapper{top:20%;left:0;right:0;position:fixed;text-align:center;margin:auto}#calendar-wrapper:after{content:"";width:100%;height:100%;background-color:rgba(0,0,0,.3);position:fixed;top:0;left:0;z-index:100}#calendar-wrapper .dayContainer{padding:0 5px}#calendar-wrapper .flatpickr-calendar{box-sizing:content-box;padding:30px;top:0!important;left:0!important;position:relative}#calendar-wrapper .flatpickr-calendar::after,#calendar-wrapper .flatpickr-calendar::before{display:none}#calendar-wrapper .flatpickr-prev-month{top:27px;left:20px}#calendar-wrapper .flatpickr-next-month{top:27px;right:20px}#calendar-wrapper .flatpickr-day{font-size:1rem;font-weight:700;line-height:1.75em;border-radius:10px;margin-bottom:2px;background-color:#d4f5fa;position:relative;z-index:10}#calendar-wrapper .flatpickr-day.flatpickr-disabled{background:#f2f2f2;color:#acacac}#calendar-wrapper .flatpickr-day.endRange,#calendar-wrapper .flatpickr-day.inRange,#calendar-wrapper .flatpickr-day.startRange{border:none;position:relative}#calendar-wrapper .flatpickr-day.endRange .day--btn,#calendar-wrapper .flatpickr-day.inRange .day--btn,#calendar-wrapper .flatpickr-day.startRange .day--btn{background:0 0}#calendar-wrapper .flatpickr-day.startRange{border-top-right-radius:0;border-bottom-right-radius:0;z-index:1;background-color:#4c8ffb}#calendar-wrapper .flatpickr-day.startRange::after{content:"";width:150%;height:100%;position:absolute;top:0;left:0;z-index:1}#calendar-wrapper .flatpickr-day.startRange span{color:#fff}#calendar-wrapper .flatpickr-day.endRange{border-top-left-radius:0;border-bottom-left-radius:0;z-index:10;background-color:#4c8ffb;-webkit-box-shadow:-4px 0 0 #95defc;box-shadow:-4px 0 0 #95defc}#calendar-wrapper .flatpickr-day.endRange span{color:#fff}#calendar-wrapper .flatpickr-day.endRange.startRange{border-radius:10px;-webkit-box-shadow:none!important;box-shadow:none!important}#calendar-wrapper .flatpickr-day.inRange{border:none;border-radius:0;z-index:2;background-color:#95defc;-webkit-box-shadow:-4px 0 0 #95defc;box-shadow:-4px 0 0 #95defc}#calendar-wrapper .dayContainer:nth-child(n+1) .flatpickr-day.endRange:nth-child(7n+7),#calendar-wrapper .dayContainer:nth-child(n+1) .flatpickr-day.inRange:nth-child(7n+7){-webkit-box-shadow:-4px 0 0 #95defc!important;box-shadow:-4px 0 0 #95defc!important;border-top-right-radius:10px;border-bottom-right-radius:10px}#calendar-wrapper .dayContainer:nth-child(n+1) .flatpickr-day.endRange:nth-child(7n+1),#calendar-wrapper .dayContainer:nth-child(n+1) .flatpickr-day.inRange:nth-child(7n+1){-webkit-box-shadow:none!important;box-shadow:none!important;border-top-left-radius:10px;border-bottom-left-radius:10px}.day-number{font-size:1rem;font-weight:700;color:#1c38a8}.day-price{position:absolute;z-index:1;bottom:3px;font-size:.7rem;font-weight:400;left:0;right:0;line-height:1em;color:#447fd1}
        </style>
    </head>
    <body>
        <a href="#main-content" class="skip-link">Skip to main content</a>
        <header id="header">
            <div class="container display-flex">
                <div class="logo">
                    <a href="#main-content" class="logo--link">Travelking</a>
                </div>
            </div>
        </header>
        <main id="main-content">
            <div class="container">
                <section id="check-availabilities" class="section"
                    aria-labelledby="home-heading">
                    <h1 id="check-availabilities--heading">Welcome to Our
                        Travelking Website</h1>
                    <p>Here you can check availabilities and prices for 6 months
                        in advance for 2 adults.</p>
                    <div class="check-availabilities--btn--wrapper">
                        <button id="check-availabilities--btn" class="btn">Check Availabilities</button>
                    </div>
                </section>

                <section id="section--message"></section>

                <section id="section--rooms"></section>

                <div id="calendar"></div>


            </div>
        </main>
        <footer id="footer">
            <p>&copy; 2024 Travelking Test Website. All rights reserved.</p>
        </footer>
        <script async>
            let URL="https://api.travelcircus.net/hotels/17080/",CHECKINS_URL=URL+`checkins?E&party=%7B%22adults%22:2,%22childre
n%22:%5B%5D%7D&domain=de&date_start=2025-01-01&date_end=2025-06-31`;function quoteeUrl(e,t){return URL+`quotes?locale=de_DE&checkin=${e}
&checkout=${t}&party=%7B"adults":2,"children":[]%7D&domain=de`}async function fetchDates(e,t){var a=t.innerText;t.innerText="loading...";try{var n=await fetch(e);if(n.ok)return await n.json();throw new Error("HTTP error! status: "+n.status)}catch(e){console.log("Error: "+e)}finally{t.innerText=a}}function precessDates(e){var t,a=[];let s={},n=0;for(t of e._embedded.hotel_availabilities)a[n]=t.date,s[t.date]=t,n++;e=800<window.innerWidth?2:1;flatpickr("#calendar",{dateFormat:"Y-m-d",closeOnSelect:!1,mode:"range",showMonths:e,enable:a,onDayCreate:function(e,t,a,n){var r,o=new Intl.DateTimeFormat("en-CA").format(n.dateObj);s[o]&&(r=n.innerHTML,n.innerHTML=`
        <span class='day-number'>${r}</span>
          <span class='day-price'>${s[o].price}</span>
          `)},onOpen:(e,t,a)=>{var n=a.calendarContainer,r=document.createElement("div"),r=(r.id="calendar-wrapper",n.parentNode.insertBefore(r,n),r.appendChild(n),document.createElement("button"));r.textContent="Apply",r.className="apply-button btn",n.appendChild(r),r.addEventListener("click",()=>{a.close();var e=a.input.value;displayRooms(e.split(" to ")[0],e.split(" to ")[1])})},onClose:function(e,t,a){document.getElementById("calendar-wrapper").remove()}}).open()}async function createCalendar(e,t){precessDates(await fetchDates(e,t))}async function fetchRooms(e,a){e=quoteeUrl(e,a);let t=document.getElementById("section--rooms");t.innerHTML=roomCard();var a=document.getElementById("section--message"),n=document.querySelectorAll(".room-card");try{a.innerHTML="";var r=await fetch(e);if(r.ok)return(await r.json())._embedded.hotel_quotes;throw new Error("HTTP error! status: "+r.status)}catch(e){let t=document.getElementById("section--rooms");t.innerHTML=null,a.innerHTML=`<div class="error-message">
    There are no rooms available for the selected period. Please try another dates.</div>`,console.log("Error: "+e)}finally{n.forEach(e=>{e.classList.remove("suspense-block")})}}async function displayRooms(e,t){e=await fetchRooms(e,t);let a=document.getElementById("section--rooms");a.innerHTML=null,e&&e.map((e,t)=>{e=roomCard(e,t);a.innerHTML+=e})}function roomCard(e,t=0){let a="suspense-block",n="suspense-line",r="",o="",s="",c="",i="";return e&&(a="",n="",r=e.description,c=e.full_formatted_price,i=e.fullPriceBreakdown.nights,o=`<img src="${e._embedded.pictures[0].offer_teaser_ncol}"
     alt="${e._embedded.pictures[0].description}" loading="lazy" />`,e._embedded.amenities)&&(s=e._embedded.amenities.reduce((e,t)=>e+`<div>${t.description}</div>`,"")),`
    <article id="section--rooms--${t}" class="room-card ${a}">
                <div class="room-card--left">
                    ${o}
                </div>
                <div class="room-card--right">
                    <div class="room-card--body">
                        <h2 class="room-card--header">${r}</h2>
                        <div class="room-card--body--amenities ${n}">
                        ${s}
                        </div>
                    </div>
                    <div class="room-card--body--price">
                        <span class="room-card--body--price--number ${n}">
                          ${c}
                        </span>
                        <span class="room-card--body--price--nights ${n}">
                          for ${i} nights
                        </span>
                        <span class="room-card--body--price--book ${n}">
                          <button class="btn">Book</button>
                        </span>
                    </div>
                </div>
            </article>`}let btn=document.getElementById("check-availabilities--btn");btn.onclick=e=>createCalendar(CHECKINS_URL,e.target);
</script>
    </body>
</html>